# 第五章 继承与派生

- 继承的引出
- 派生类的定义
- 派生后的访问权限控制
- 派生类的构造函数和析构函数
- 多继承与虚基类
- 设计类层次结构

## 派生类

### 派生类的定义

```c++
class <派生类名>:<继承方式> <基类名>
{
    <派生类新定义成员>
};
```

类的继承方式有public(公有继承)、protected(保护继承)和private(私有继承)三种。默认情况下为私有继承。 

派生类继承了基类的全部数据成员和除了构造、析构函数之外的全部成员函数，它们在派生类中的访问属性由继承方式控制。

| 基类   成员 | 公有继承           | 私有继承           | 保护继承           |
| ----------- | ------------------ | ------------------ | ------------------ |
| 公有成员    | 公有               | 私有               | 保护               |
| 私有成员    | 派生类成员不可访问 | 派生类成员不可访问 | 派生类成员不可访问 |
| 保护成员    | 保护               | 私有               | 保护               |

- 保护继承对于他的派生类而言是可见的

### 派生类的构造和析构函数

```c++
Rectangle(float x,float y,float w,float h):Point(x,y)
{W=w;H=h;}
```

调用顺序：沿继承路径上溯到对应类层次结构分支的顶点（即到达一个没有父类的类），再自上而下地沿该路径逐一调用对应类的constructor，最后调用Sub11的constructor

**构造函数调用顺序为：基类的构造函数→对象成员构造函数→派生类的构造函数。**

析构函数调用顺序相反

- 当基类中没有显式定义构造函数，或定义了无参构造函数时，派生类构造函数的初始化表可以省略对基类构造函数的调用，而采用隐含调用。
- 如果在一个派生类中要访问基类中的私有成员，可以将这个派生类声明为基类的友元 **但是不可在类外调用**

## 多继承与虚基类

```
class <派生类名>:<继承方式> <基类名1>，…，<继承方式> <基类名n>
{
    <派生类新定义成员>
};
```

- 处于同一层次的各基类构造函数的调用顺序取决于定义派生类时所指定的基类顺序

